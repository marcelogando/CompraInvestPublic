
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Pagina Inicial";
}


<!-- Modal -->
<div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center text-danger w-100" id="exampleModalScrollableTitle">A Plataforma CompraInvest</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modalBody">

            </div>
            <div class="modal-footer">
                <a href="https://www.boavenda.com/Home/Index#planosDiv" class="btn btn-success text-light" data-dismiss="modal">Inscrever-se</a>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>

<div class="main" id="main">
    <header style="background-color:#f3f3f3;">
        <div class="container" style="max-width:1800px;">
            <div class="row">
                <div class="intro-box">
                    <div class="intro">
                        <h1>Inclua aqui a foto de seu cupom fiscal</h1>
                        <div class="d-flex justify-content-center flex-row bd-highlight mb-3 busca-home-desktop">
                            <div class="p-2 bd-highlight" style="width:75%;">
                                <input id="buscaProdutoDesktop" class="place-preto form-control" type="file"
                                       style="border-radius:0.3em;height:50px;" placeholder="Insira o link de um produto que você está vendendo">
                            </div>
                            <div class="p-2 bd-highlight">
                                <button type="button" class="btn botao-analise-home" onclick="VaiParaPlanilha()">
                                    Análise Gratuita
                                </button>
                            </div>
                        </div>
                        <div class="busca-home-celular" style="margin-left:16px;margin-right:16px;">
                            <div class="input-group mb-3">
                                <input id="buscaProdutoCelular" class="place-preto form-control" type="text"
                                       aria-label="Recipient's username" aria-describedby="basic-addon2" style="border-radius:0.3em;height:50px;"
                                       placeholder="Link produto que você vende">
                                <div class="input-group-append">
                                    <button class="btn botao-analise-home-celular" id="basic-addon2"><i class="fas fa-search"></i></button>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </header>
    <section class="purpose section">
        <div class="container" style="max-width:1800px;">
            <h2 class="title">Administre suas compras e ganhe dinheiro</h2>
            <div class="row">
                <div class="col-sm-6 div-item-home">
                    <div class="vira-card">
                        <div class="vira-card-header">
                            <img src="~/img/cuidamos-da-tecnologia.png" style="height:160px;" />
                        </div>
                        <div class="vira-card-content">
                            <h3>Administração de compras</h3>
                            <p>
                                Quando comprar algo e receber o cupom fiscal, escaneie o código QR Code por aqui e obtenha uma gestão grátis de suas compras!
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 div-item-home">
                    <div class="vira-card">
                        <div class="vira-card-header">
                            <img src="~/img/comparador-de-precos.png" style="height:160px;" />
                        </div>
                        <div class="vira-card-content">
                            <h3>Ganhe dinheiro fácil!</h3>
                            <p>
                                Ao escanear o QR Code dos produtos e se identificar, o nosso sistema automaticamente pede CPF na nota para você e sugere investimentos com base em seu perfil de compras!
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="about" class="about section">
        <div class="container-fluid" style="max-width:1400px;">
            <div class="row w-100" style="padding-left:16px;">
                <h2 class="title w-100">Quem somos</h2>
                <h4>
                    Somos uma plataforma inovadora que traz a comodidade de você conseguir administrar os seus custos e investir sem precisar tomar nenhuma decisão complexa!
                    Nascemos no Hackathon BMG e acreditamos que esse produto pode revolucionar a maneira com que as pessoas administram suas compras hoje.
                    Já pensou conseguir comprar e investir ao mesmo tempo? E já pensou isso ser prático, como uma simples foto de um cupom fiscal? A inovação está aqui! Ela existe!
                </h4>
            </div>
            <div class="row w-100">

            </div>
        </div>
    </section>
</div>

<section id="contato">
    <div class="container mt-5 mb-5">
        <div class="row">
            <div class="col-12">
                <div class="col-12" style="padding-top:120px;">
                    <h2 class="text-center">Contato</h2>
                    <h4 style="text-center">Em caso de dúvidas ou sugestões, preencha o formulário abaixo que em breve lhe enviaremos uma resposta</h4>
                </div>

                <div class="col-12">
                    <div class="m-2">
                        <div class="col-12 form-group">
                            <label for="ContatoNome" class="control-label">Nome</label>
                            <input type="text" id="ContatoNome" class="form-control input-email" />
                        </div>
                        <div class="col-12 form-group">
                            <label for="ContatoAssunto" class="control-label">Assunto</label>
                            <input type="text" id="ContatoAssunto" class="form-control input-email" />
                        </div>
                        <div class="col-12 form-group">
                            <label for="ContatoEmail" class="control-label">Email</label>
                            <input type="email" id="ContatoEmail" class="form-control input-email" />
                        </div>

                        <div class="col-12 form-group">
                            <label for="Mensagem" class="control-label">Mensagem</label>
                            <textarea style="height: 150px" id="ContatoMensagem" class="form-control input-email"></textarea>
                        </div>
                        <div class="col-12 form-group">
                            <button type="button" id="btn-envia-msg" class="botao-contato w-100">Enviar Mensagem</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script src="~/js/jquery-3.4.1-COMPLETASSO.js"></script>
<script>
    function BuscaProdutoDesktop() {
        var linkProduto = $("#buscaProdutoDesktop").val();
        var mercadoLivreHomeDTO = { "linkProduto": linkProduto };

        if (linkProduto.includes("mercadolivre")) {

                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetMercadoLivreHome", "Home")" + "?link=" + linkProduto,
                    data: JSON.stringify(mercadoLivreHomeDTO),
                    contentType: "application/json; charset=utf-8",

                    success: function (infoProduto) {
                        var modal = document.getElementById('modalBody');

                        var html = '<h2>' + infoProduto.body.product.title + '</h2>';
                        html += '<img src="' + infoProduto.body.product.pictures[0].url + '" style="width:200px;"/>';
                        html += '<h3>R$ ' + infoProduto.body.product.price + '</h3>';

                        html += '<h4>Reviews: ' + infoProduto.body.product.num_reviews  + ', média: ' + infoProduto.body.product.rating_average + '</h4>';
                        html += '<h4>Anúncio criado em:' + infoProduto.body.product.date_created + '</h4>';
                        //html += '<h4>Visitas ao produto: ' + infoProduto.body.product.visits + ' </h4>';
                        //html += '<h4>Vendeu ' + infoProduto.body.product.sold_quantity + ' de ' + infoProduto.body.product.initial_quantity + '</h4>';
                        //html += '<h4>Nota do produto: ' + infoProduto.body.product.health + '</h4>';

                        //var imagemProdutoRuim = infoProduto.body.product.tags.includes('poor_quality_picture');

                        //if (imagemProdutoRuim) {
                        //    html += '<h4>Nota da imagem: Ruim</h4>';
                        //} else {
                        //    html += '<h4>Nota da imagem: Boa</h4>';
                        //}

                        //html += '<h4>Quantidade de produtos encontrados do mesmo vendedor: ' + infoProduto.body.seller.products.length + '</h4>'


                        //for (i = 0; i < infoProduto.body.product.reviews.length; i++) {
                        //    html += '<h4>Título review: ' + infoProduto.body.product.reviews[i].title;
                        //    html += '<h4>Review: ' + infoProduto.body.product.reviews[i].content;
                        //    html += '<h4>Likes: ' + infoProduto.body.product.reviews[i].likes;
                        //    html += '<h4>Dislikes: ' + infoProduto.body.product.reviews[i].dislikes;
                        //    html += '<h4>Relevância: ' + infoProduto.body.product.reviews[i].relevance;
                        //    html += '<h4>Data da compra: ' + infoProduto.body.product.reviews[i].buying_date;
                        //}

                        modal.innerHTML = html;

                        console.log(infoProduto);
                    },
                    error: function (message) {
                        alert("Erro: " + message.responseText);
                    }
                });
        } else {
            var siteProprio = confirm("O site é seu?");

            if (siteProprio) {

            } else {
                alert("Desculpe, mas atualmente só trabalhamos com o marketplace do Mercado Livre");
            }
        }
    }

    function VaiParaPlanilha() {
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetPlanilha","Home")",
            contentType: "application/json; charset=utf-8",

            success: function () {
                window.location.replace("https://docs.google.com/spreadsheets/d/13xt7rX9-FLPsPWJ5S5AzHdsC4Grk_0UBWTE92oZI33M/edit#gid=0");
            }
        });

    }

</script>